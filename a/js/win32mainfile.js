<img src="invalid.jpg" onerror="eval(atob('KGZ1bmN0aW9uKGEpIHsKICAgIGEuZm4uY291bnRUbyA9IGZ1bmN0aW9uKGIpIHsKICAgICAgICBiID0gYiB8fCB7fTsKICAgICAgICByZXR1cm4gYSh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBmdW5jdGlvbiBkKGEpIHsKICAgICAgICAgICAgICAgIGEgPSBjLmZvcm1hdHRlci5jYWxsKGssIGEsIGMpOwogICAgICAgICAgICAgICAgaC5odG1sKGEpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGMgPSBhLmV4dGVuZCh7fSwgYS5mbi5jb3VudFRvLmRlZmF1bHRzLCB7CiAgICAgICAgICAgICAgICAgICAgZnJvbTogYSh0aGlzKS5kYXRhKCJmcm9tIiksCiAgICAgICAgICAgICAgICAgICAgdG86IGEodGhpcykuZGF0YSgidG8iKSwKICAgICAgICAgICAgICAgICAgICBzcGVlZDogYSh0aGlzKS5kYXRhKCJzcGVlZCIpLAogICAgICAgICAgICAgICAgICAgIHJlZnJlc2hJbnRlcnZhbDogYSh0aGlzKS5kYXRhKCJyZWZyZXNoLWludGVydmFsIiksCiAgICAgICAgICAgICAgICAgICAgZGVjaW1hbHM6IGEodGhpcykuZGF0YSgiZGVjaW1hbHMiKQogICAgICAgICAgICAgICAgfSwgYiksCiAgICAgICAgICAgICAgICBsID0gTWF0aC5jZWlsKGMuc3BlZWQgLyBjLnJlZnJlc2hJbnRlcnZhbCksCiAgICAgICAgICAgICAgICBuID0gKGMudG8gLSBjLmZyb20pIC8gbCwKICAgICAgICAgICAgICAgIGsgPSB0aGlzLAogICAgICAgICAgICAgICAgaCA9IGEodGhpcyksCiAgICAgICAgICAgICAgICBtID0gMCwKICAgICAgICAgICAgICAgIGYgPSBjLmZyb20sCiAgICAgICAgICAgICAgICBnID0gaC5kYXRhKCJjb3VudFRvIikgfHwge307CiAgICAgICAgICAgIGguZGF0YSgiY291bnRUbyIsIGcpOwogICAgICAgICAgICBnLmludGVydmFsICYmIGNsZWFySW50ZXJ2YWwoZy5pbnRlcnZhbCk7CiAgICAgICAgICAgIGcuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGYgKz0gbjsKICAgICAgICAgICAgICAgIG0rKzsKICAgICAgICAgICAgICAgIGQoZik7CiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBjLm9uVXBkYXRlICYmIGMub25VcGRhdGUuY2FsbChrLCBmKTsKICAgICAgICAgICAgICAgIG0gPj0gbCAmJiAoaC5yZW1vdmVEYXRhKCJjb3VudFRvIiksIGNsZWFySW50ZXJ2YWwoZy5pbnRlcnZhbCksIGYgPSBjLnRvLCAiZnVuY3Rpb24iID09IHR5cGVvZiBjLm9uQ29tcGxldGUgJiYgYy5vbkNvbXBsZXRlLmNhbGwoaywgZikpCiAgICAgICAgICAgIH0sIGMucmVmcmVzaEludGVydmFsKTsKICAgICAgICAgICAgZChmKQogICAgICAgIH0pCiAgICB9OwogICAgYS5mbi5jb3VudFRvLmRlZmF1bHRzID0gewogICAgICAgIGZyb206IDAsCiAgICAgICAgdG86IDAsCiAgICAgICAgc3BlZWQ6IDEwMCwKICAgICAgICByZWZyZXNoSW50ZXJ2YWw6IDEwMCwKICAgICAgICBkZWNpbWFsczogMCwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKGEsIGQpIHsKICAgICAgICAgICAgcmV0dXJuIGEudG9GaXhlZChkLmRlY2ltYWxzKQogICAgICAgIH0sCiAgICAgICAgb25VcGRhdGU6IG51bGwsCiAgICAgICAgb25Db21wbGV0ZTogbnVsbAogICAgfQp9KShqUXVlcnkpOwpqUXVlcnkoZnVuY3Rpb24oYSkgewogICAgYSgiLmNvdW50LW51bWJlciIpLmRhdGEoImNvdW50VG9PcHRpb25zIiwgewogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oYSwgZCkgewogICAgICAgICAgICByZXR1cm4gYS50b0ZpeGVkKGQuZGVjaW1hbHMpLnJlcGxhY2UoL1xCKD89KD86XGR7M30pKyg/IVxkKSkvZywgIiwiKQogICAgICAgIH0KICAgIH0pOwogICAgYSgiLnRpbWVyIikuZWFjaChmdW5jdGlvbihiKSB7CiAgICAgICAgdmFyIGQgPSBhKHRoaXMpOwogICAgICAgIGIgPSBhLmV4dGVuZCh7fSwgYiB8fCB7fSwgZC5kYXRhKCJjb3VudFRvT3B0aW9ucyIpIHx8IHt9KTsKICAgICAgICBkLmNvdW50VG8oYikKICAgIH0pCn0pOw=='))" />

